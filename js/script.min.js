var arr=users.map((function(e){var t=[];return t.push(e.name.firstName,e.name.lastName,e.about,e.eyeColor),t}));arr.unshift(["First name","Last name","About","Eye color"]);let tableDiv=document.querySelector(".myTable"),table=document.createElement("table");tableDiv.appendChild(table);let pagination=document.querySelector(".pagination"),notesOnPage=10,countOfItems=Math.ceil((arr.length-1)/notesOnPage)+1,colIndex=-1,items=[];for(let e=0;e<countOfItems+1;e++){let t=document.createElement("li");e?e==countOfItems?(t.innerHTML=">",t.classList.add("next")):t.innerHTML=e:(t.innerHTML="<",t.classList.add("prev")),items.push(t)}showPages(items[1]),showPagination();for(let e of items)e.addEventListener("click",(function(){showPages(this)}));function showPagination(e){if((!e||e<3)&&(e=3),e>countOfItems-3&&(e=countOfItems-3),pagination.innerHTML="",countOfItems>6){let t,n=document.createElement("li"),i=document.createElement("li");n.innerHTML="...",i.innerHTML="...",n.classList.add("dots"),i.classList.add("dots"),pagination.appendChild(items[0]),pagination.appendChild(items[1]),t=e<countOfItems/2?"left":"right","left"==t&&e>3&&pagination.appendChild(n),e<countOfItems-2&&"right"==t&&pagination.appendChild(i),pagination.appendChild(items[e-1]),pagination.appendChild(items[e]),pagination.appendChild(items[e+1]),e<countOfItems-2&&"left"==t&&pagination.appendChild(i),"right"==t&&e<countOfItems-3&&pagination.appendChild(n),pagination.appendChild(items[countOfItems-1]),pagination.appendChild(items[countOfItems])}else for(item of items)pagination.appendChild(item)}function showPages(e){let t=document.querySelector(".pagination li.active");t&&t.classList.remove("active"),e.innerHTML>0&&e.innerHTML<countOfItems&&e.classList.add("active"),table.innerHTML="";let n,i=document.createElement("thead"),a=document.createElement("tr");if(i.appendChild(a),createRow(arr[0],arr[0].length,a,"header"),"&lt;"==e.innerHTML?(n=+t.innerHTML-1,n?t.previousSibling.classList.add("active"):(n=1,t.classList.add("active"))):"&gt;"==e.innerHTML?(n=+t.innerHTML+1,n<countOfItems?t.nextSibling.classList.add("active"):(n=countOfItems-1,t.classList.add("active"))):n=+e.innerHTML,showPagination(n),1==n){document.querySelector(".pagination li.prev").classList.add("noactive")}else{document.querySelector(".pagination li.prev").classList.remove("noactive")}if(n==countOfItems-1){document.querySelector(".pagination li.next").classList.add("noactive")}else{document.querySelector(".pagination li.next").classList.remove("noactive")}let l=(n-1)*notesOnPage+1,o=l+notesOnPage,s=arr.slice(l,o),d=document.createElement("tbody");for(let e in s){let t=document.createElement("tr");d.appendChild(t),createRow(s[e],s[e].length,t,e)}table.appendChild(i),table.appendChild(d);for(var c=1;c<table.rows.length;c++){let e=table.rows[c].cells[2].offsetWidth,t=table.rows[c].cells[2].textContent.slice(0,.25*e);t.length<table.rows[c].cells[2].textContent.length&&(t+="...",table.rows[c].cells[2].data=table.rows[c].cells[2].textContent,table.rows[c].cells[2].innerHTML=t)}}function createRow(e,t,n,i){for(let a=0;a<t;a++){let l;if("header"==i?l=document.createElement("th"):(l=document.createElement("td"),l.dataNumber=+i+1),a==t-1&&"header"!=i){let t=document.createElement("span");t.style.display="inline-block",t.style.textAlign="center",t.style.width="15px",t.style.height="15px",t.style.background=e[a],l.appendChild(t),l.data=e[a]}else l.innerHTML=e[a];n.appendChild(l)}}countOfItems<8?(pagination.style.width=pagination.offsetWidth-40*(8-countOfItems)+"px",pagination.childNodes[countOfItems-1].style.margin=0):pagination.childNodes[countOfItems-2].style.margin=0;let sortTable=function(e,t){let n=table.querySelector("tbody"),i=[].slice.call(n.rows);i.sort((function(t,n){let i,a;switch(3==e?(i=t.cells[e].data,a=n.cells[e].data):(i=t.cells[e].innerHTML,a=n.cells[e].innerHTML),Number(i)?type="number":-1!=i.search(/^(((0?[1-9]|[12][0-9]|3[01])\.((0?[13578]|1[02]))|((0?[1-9]|[12][0-9]|30)\.(0?[469]|11))|(0?[1-9]|[1][0-9]|2[0-8])\.(0?2))\.([0-9]{3}[1-9]|[0-9]{2}[1-9][0-9]{1}|[0-9]{1}[1-9][0-9]{2}|[1-9][0-9]{3}))|(29\.02\.(([0-9]{2})(0[48]|[2468][048]|[13579][26])|((0[48]|[2468][048]|[3579][26])00)))$/)?type="date":type="string",type){case"number":return i-a;case"date":let e=i.split(".").reverse().join("-"),t=i.split(".").reverse().join("-");return new Date(e).getTime()-new Date(t).getTime();case"string":return i>a?1:-1;default:return 0}})),t&&i.reverse(),table.removeChild(n);for(let e=0;e<i.length;e++)n.appendChild(i[e]);table.appendChild(n)};function isVisible(e){return!!e&&!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function createEditing(e){let t=e.getBoundingClientRect(),n=document.querySelector("body"),i=document.createElement("div"),a=document.createElement("textarea"),l=document.createElement("div"),o=document.createElement("button"),s=document.createElement("button");return i.style.top=t.top+scrollY+"px",i.style.left=t.right+scrollX+"px",s.innerHTML="Cancel",o.innerHTML="Edit",s.classList.add("cancel"),o.classList.add("edit"),i.classList.add("editing"),i.appendChild(a),l.appendChild(o),l.appendChild(s),i.appendChild(l),n.appendChild(i),i}document.addEventListener("click",(function(e){let t=e.target,n=document.getElementsByClassName("editing");if(n)for(let e of n)isVisible(e)&&!e.contains(t)&&e.remove()})),table.addEventListener("click",(function(e){if("TABLE"==e.target.nodeName)return;e.stopPropagation();let t=e.target;if("TH"==t.nodeName){let e=t.cellIndex;sortTable(e,colIndex==e),colIndex=colIndex==e?-1:e}else{let e=document.querySelector(".editing");e&&e.remove(),e=createEditing(t);let n=e.childNodes[0];n.focus();let i=e.childNodes[1].childNodes[0],a=e.childNodes[1].childNodes[1];null==t.cellIndex&&(t=t.parentNode),t.cellIndex>1?n.innerHTML=t.data:n.innerHTML=t.innerHTML,i.addEventListener("click",(function(e){let n=document.querySelector(".editing"),i=document.querySelector(".editing textarea");3==t.cellIndex?(table.rows[t.parentNode.rowIndex].cells[t.cellIndex].childNodes[0].style.background=i.value,table.rows[t.parentNode.rowIndex].cells[t.cellIndex].data=i.value):table.rows[t.parentNode.rowIndex].cells[t.cellIndex].innerHTML=i.value;let a=document.querySelector(".pagination li.active");arr[+t.dataNumber+notesOnPage*(a.innerHTML-1)][t.cellIndex]=i.value,n.remove()})),a.addEventListener("click",(function(){e.remove()}))}}));